<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NutriGraph - Advanced Food Intelligence Platform</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <script src="nutrigraph-chatbot.js"></script>
    <script>
        // Initialize chatbot with API key when the page is fully loaded
        document.addEventListener('DOMContentLoaded', () => {
            // Replace this with your actual Gemini API key
            const apiKey = 'AIzaSyC9eLx2jqCWEKqPK-hTEEqaTijAykIyxsY';
            window.nutriGraphChatbot = new NutriGraphChatbot(apiKey);
        });
    </script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --success-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --warning-gradient: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            --dark-gradient: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            --glass-bg: rgba(255, 255, 255, 0.25);
            --glass-border: rgba(255, 255, 255, 0.18);
            --text-primary: #2d3748;
            --text-secondary: #718096;
            --bg-primary: #f8fafc;
            --shadow-primary: 0 20px 40px rgba(0, 0, 0, 0.1);
            --shadow-hover: 0 30px 60px rgba(0, 0, 0, 0.15);
            --border-radius: 20px;
            --border-radius-sm: 12px;
            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
            --spacing-xl: 3rem;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            min-height: 100vh;
            color: var(--text-primary);
            line-height: 1.6;
        }

        .app-container {
            min-height: 100vh;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
        }

        /* Header Styles */
        .header {
            background: var(--dark-gradient);
            color: white;
            padding: var(--spacing-md) 0;
            box-shadow: var(--shadow-primary);
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(20px);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 var(--spacing-lg);
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: var(--spacing-md);
        }

        .brand {
            display: flex;
            align-items: center;
            gap: var(--spacing-md);
        }

        .brand-icon {
            width: 50px;
            height: 50px;
            background: var(--success-gradient);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .brand-text {
            display: flex;
            flex-direction: column;
        }

        .brand-title {
            font-size: 1.8rem;
            font-weight: 800;
            letter-spacing: -0.02em;
        }

        .brand-subtitle {
            font-size: 0.9rem;
            opacity: 0.8;
            font-weight: 400;
        }

        .nav-tabs {
            display: flex;
            gap: var(--spacing-xs);
            background: rgba(255, 255, 255, 0.1);
            padding: var(--spacing-xs);
            border-radius: 50px;
            backdrop-filter: blur(10px);
        }

        .nav-tab {
            padding: var(--spacing-sm) var(--spacing-md);
            background: transparent;
            border: none;
            border-radius: 50px;
            color: white;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 500;
            font-size: 0.95rem;
            position: relative;
            overflow: hidden;
        }

        .nav-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.2);
            transition: left 0.3s ease;
        }

        .nav-tab:hover::before {
            left: 0;
        }

        .nav-tab.active {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .nav-tab i {
            margin-right: var(--spacing-xs);
        }

        /* Main Content */
        .main-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--spacing-xl) var(--spacing-lg);
        }

        /* Glass Card Component */
        .glass-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius);
            padding: var(--spacing-xl);
            box-shadow: var(--shadow-primary);
            margin-bottom: var(--spacing-lg);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .glass-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }

        /* Search Section */
        .search-section {
            margin-bottom: var(--spacing-xl);
        }

        .section-header {
            text-align: center;
            margin-bottom: var(--spacing-xl);
        }

        .section-title {
            font-size: 3rem;
            font-weight: 800;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: var(--spacing-sm);
            letter-spacing: -0.02em;
        }

        .section-subtitle {
            font-size: 1.2rem;
            color: var(--text-secondary);
            font-weight: 400;
            max-width: 600px;
            margin: 0 auto;
        }

        .search-tabs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-xl);
        }

        .search-tab {
            background: white;
            border: 2px solid transparent;
            border-radius: var(--border-radius-sm);
            padding: var(--spacing-md);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .search-tab::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--primary-gradient);
            transition: left 0.3s ease;
            z-index: -1;
        }

        .search-tab.active::before {
            left: 0;
        }

        .search-tab.active {
            color: white;
            border-color: transparent;
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(102, 126, 234, 0.3);
        }

        .search-tab-icon {
            font-size: 2rem;
            margin-bottom: var(--spacing-sm);
            display: block;
        }

        .search-tab-title {
            font-weight: 600;
            font-size: 1.1rem;
        }

        .search-tab-desc {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-top: var(--spacing-xs);
        }

        /* Form Elements */
        .form-grid {
            display: grid;
            gap: var(--spacing-md);
        }

        .input-group {
            position: relative;
        }

        .input-label {
            display: block;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: var(--spacing-xs);
            font-size: 0.95rem;
        }

        .form-input {
            width: 100%;
            padding: var(--spacing-md) var(--spacing-md) var(--spacing-md) 3rem;
            border: 2px solid #e2e8f0;
            border-radius: var(--border-radius-sm);
            font-size: 1rem;
            transition: all 0.3s ease;
            background: white;
            font-family: inherit;
        }

        .form-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }

        .input-icon {
            position: absolute;
            left: var(--spacing-md);
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-secondary);
            font-size: 1.1rem;
            z-index: 2;
        }

        .filters-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-md);
            margin-top: var(--spacing-lg);
        }

        .range-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-sm);
        }

        .btn {
            padding: var(--spacing-md) var(--spacing-lg);
            border: none;
            border-radius: var(--border-radius-sm);
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-xs);
            text-decoration: none;
            font-family: inherit;
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-primary {
            background: var(--primary-gradient);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: var(--secondary-gradient);
            color: white;
        }

        .btn-success {
            background: var(--success-gradient);
            color: white;
        }

        .btn-outline {
            background: transparent;
            border: 2px solid #e2e8f0;
            color: var(--text-primary);
        }

        .btn-outline:hover {
            background: var(--primary-gradient);
            color: white;
            border-color: transparent;
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* File Upload */
        .file-upload {
            border: 3px dashed #e2e8f0;
            border-radius: var(--border-radius);
            padding: var(--spacing-xl);
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            background: white;
        }

        .file-upload:hover {
            border-color: #667eea;
            background: #f8fafc;
        }

        .file-upload.active {
            border-color: #667eea;
            background: rgba(102, 126, 234, 0.05);
        }

        .file-upload-icon {
            font-size: 3rem;
            color: #667eea;
            margin-bottom: var(--spacing-sm);
        }

        .file-upload-text {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: var(--spacing-xs);
        }

        .file-upload-hint {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        /* Results Grid */
        .results-section {
            margin-top: var(--spacing-xl);
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-lg);
            flex-wrap: wrap;
            gap: var(--spacing-md);
        }

        .results-count {
            font-size: 1.2rem;
            font-weight: 600;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: var(--spacing-lg);
        }

        .food-card {
            background: white;
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow-primary);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
        }

        .food-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--primary-gradient);
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1;
        }

        .food-card:hover::before {
            opacity: 0.1;
        }

        .food-card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-hover);
        }

        .food-image {
            width: 100%;
            height: 220px;
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .food-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .food-card:hover .food-image img {
            transform: scale(1.1);
        }

        .food-image i {
            font-size: 3rem;
            color: #a0aec0;
        }

        .food-content {
            padding: var(--spacing-md);
            position: relative;
            z-index: 2;
        }

        .food-name {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: var(--spacing-xs);
            color: var(--text-primary);
        }

        .food-category {
            display: inline-block;
            background: var(--primary-gradient);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-bottom: var(--spacing-sm);
        }

        .food-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: var(--spacing-md);
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .nutrition-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--spacing-sm);
        }

        .nutrition-item {
            background: #f8fafc;
            padding: var(--spacing-sm);
            border-radius: var(--border-radius-sm);
            text-align: center;
            border-left: 4px solid transparent;
            transition: all 0.3s ease;
        }

        .nutrition-item:nth-child(1) { border-left-color: #f56565; }
        .nutrition-item:nth-child(2) { border-left-color: #4299e1; }
        .nutrition-item:nth-child(3) { border-left-color: #48bb78; }
        .nutrition-item:nth-child(4) { border-left-color: #ed8936; }

        .nutrition-value {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .nutrition-label {
            font-size: 0.8rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-top: 2px;
        }

        /* Loading States */
        .loading {
            text-align: center;
            padding: var(--spacing-xl);
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #e2e8f0;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto var(--spacing-md);
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .empty-state {
            text-align: center;
            padding: var(--spacing-xl);
            color: var(--text-secondary);
        }

        .empty-state-icon {
            font-size: 4rem;
            color: #e2e8f0;
            margin-bottom: var(--spacing-md);
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            backdrop-filter: blur(10px);
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: white;
            border-radius: var(--border-radius);
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            margin: var(--spacing-lg);
            box-shadow: 0 50px 100px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--spacing-lg);
            border-bottom: 1px solid #e2e8f0;
            background: var(--primary-gradient);
            color: white;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 700;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: white;
            padding: var(--spacing-xs);
            border-radius: 50%;
           /* Recognition Results Styles */
        .recognition-results {
            margin-top: var(--spacing-lg);
        }
        
        .recognition-cards {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: var(--spacing-md);
            margin-top: var(--spacing-md);
        }
        
        .recognition-card {
            background: white;
            border-radius: var(--border-radius-sm);
            box-shadow: var(--shadow-primary);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
        }
        
        .recognition-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-hover);
        }
        
        /* Error card styles */
        .recognition-card.error-card {
            background: rgba(255, 235, 235, 0.9);
            border: 1px solid rgba(255, 100, 100, 0.3);
            cursor: default;
        }
        
        .recognition-card.error-card:hover {
            transform: none;
            box-shadow: var(--shadow-primary);
        }
        
        .error-info h4 {
            color: #e53e3e;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 12px;
        }
        
        .error-info p {
            color: #4a5568;
            margin-bottom: 16px;
            line-height: 1.5;
        }
        
        .retry-button {
            background: var(--primary-gradient);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s ease;
        }
        
        .retry-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }
        
        .recognition-card-content {
            padding: var(--spacing-md);
        }
        
        .recognition-card-image {
            width: 100%;
            height: 150px;
            overflow: hidden;
            border-radius: var(--border-radius-sm);
            margin-bottom: var(--spacing-sm);
        }
        
        .recognition-card-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .recognition-card:hover .recognition-card-image img {
            transform: scale(1.05);
        }
        
        .recognition-card-info h4 {
            margin-bottom: var(--spacing-xs);
            color: var(--text-primary);
        }
        
        .confidence-bar-container {
            width: 100%;
            height: 8px;
            background-color: #f0f0f0;
            border-radius: 4px;
            margin-bottom: 5px;
            overflow: hidden;
        }
        
        .confidence-bar {
            height: 100%;
            background: var(--primary-gradient);
            border-radius: 4px;
        }
        
        .confidence-text {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }
        
        /* Fallback content for when API is unavailable */
        .fallback-content {
            padding: 20px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: var(--border-radius-sm);
            box-shadow: var(--shadow-primary);
            margin: 20px 0;
            text-align: center;
        }
        
        .fallback-content h3 {
            color: #4a5568;
            margin-bottom: 10px;
        }
        
        .fallback-content p {
            color: #718096;
            margin-bottom: 15px;
        }
        
        .fallback-content .btn {
            margin-top: 10px;
        }    text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .section-title {
                font-size: 2rem;
            }

            .header-content {
                flex-direction: column;
                text-align: center;
            }

            .nav-tabs {
                flex-wrap: wrap;
                justify-content: center;
            }

            .filters-grid {
                grid-template-columns: 1fr;
            }

            .results-grid {
                grid-template-columns: 1fr;
            }

            .results-header {
                flex-direction: column;
                align-items: flex-start;
            }

            .modal-content {
                margin: var(--spacing-sm);
            }
        }

        @media (max-width: 480px) {
            .main-content {
                padding: var(--spacing-lg) var(--spacing-sm);
            }

            .glass-card {
                padding: var(--spacing-lg);
            }

            .search-tabs {
                grid-template-columns: 1fr;
            }
        }

        /* Autocomplete */
        .autocomplete-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: var(--border-radius-sm);
            margin-top: 4px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            box-shadow: var(--shadow-primary);
        }

        .autocomplete-item {
            padding: var(--spacing-sm) var(--spacing-md);
            cursor: pointer;
            transition: background-color 0.2s ease;
            border-bottom: 1px solid #f7fafc;
        }

        .autocomplete-item:hover {
            background: #f8fafc;
        }

        .autocomplete-item:last-child {
            border-bottom: none;
        }

        /* Recognition Results */
        .recognition-results {
            margin-top: var(--spacing-lg);
        }

        .recognition-card {
            background: white;
            border-radius: var(--border-radius);
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-md);
            box-shadow: var(--shadow-primary);
            border-left: 4px solid #48bb78;
        }

        .confidence-bar {
            width: 100%;
            height: 8px;
            background: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
            margin: var(--spacing-sm) 0;
        }

        .confidence-fill {
            height: 100%;
            background: var(--success-gradient);
            transition: width 0.3s ease;
        }

        /* Animations */
        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        .slide-up {
            animation: slideUp 0.5s ease;
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--primary-gradient);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #5a67d8;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useCallback, useRef } = React;

        // API Configuration
        const API_BASE_URL = 'http://localhost:8080/api';

        // Main Application Component
        function NutriGraphApp() {
            const [activeTab, setActiveTab] = useState('discover');
            const [searchMode, setSearchMode] = useState('text');
            const [searchQuery, setSearchQuery] = useState('');
            const [selectedFile, setSelectedFile] = useState(null);
            const [filters, setFilters] = useState({
                foodClass: '',
                foodGroup: '',
                region: '',
                cookingMethod: '',
                spiceLevel: '',
                minCalories: '',
                maxCalories: '',
                minProtein: '',
                maxProtein: ''
            });
            const [results, setResults] = useState([]);
            const [recognitionResults, setRecognitionResults] = useState([]);
            const [loading, setLoading] = useState(false);
            const [recognitionLoading, setRecognitionLoading] = useState(false);
            const [pagination, setPagination] = useState({
                currentPage: 0,
                totalPages: 0,
                totalElements: 0,
                size: 20
            });
            const [sortBy, setSortBy] = useState('name');
            const [sortDirection, setSortDirection] = useState('asc');
            const [metadata, setMetadata] = useState({
                foodClasses: [],
                foodGroups: [],
                regions: [],
                cookingMethods: [],
                spiceLevels: []
            });
            const [autocomplete, setAutocomplete] = useState([]);
            const [showAutocomplete, setShowAutocomplete] = useState(false);
            const [selectedFood, setSelectedFood] = useState(null);
            const [showModal, setShowModal] = useState(false);
            const [backendError, setBackendError] = useState(false);

            // Load metadata on component mount
            useEffect(() => {
                loadMetadata();
            }, []);

            const loadMetadata = async () => {
                try {
                    const [classes, groups, regions, methods, levels] = await Promise.all([
                        fetch(`${API_BASE_URL}/foods/classes`).then(r => r.json()),
                        fetch(`${API_BASE_URL}/foods/groups`).then(r => r.json()),
                        fetch(`${API_BASE_URL}/foods/regions`).then(r => r.json()),
                        fetch(`${API_BASE_URL}/foods/cooking-methods`).then(r => r.json()),
                        fetch(`${API_BASE_URL}/foods/spice-levels`).then(r => r.json())
                    ]);

                    setMetadata({
                        foodClasses: classes,
                        foodGroups: groups,
                        regions: regions,
                        cookingMethods: methods,
                        spiceLevels: levels
                    });
                } catch (error) {
                    console.error('Failed to load metadata:', error);
                }
            };

            const handleAutocomplete = useCallback(async (query) => {
                if (query.length < 2) {
                    setAutocomplete([]);
                    setShowAutocomplete(false);
                    return;
                }

                try {
                    const response = await fetch(`${API_BASE_URL}/foods/autocomplete?query=${encodeURIComponent(query)}`);
                    const suggestions = await response.json();
                    setAutocomplete(suggestions);
                    setShowAutocomplete(true);
                } catch (error) {
                    console.error('Autocomplete error:', error);
                }
            }, []);

            const handleSearch = async (page = 0) => {
                setLoading(true);
                try {
                    const searchParams = new URLSearchParams({
                        page: page.toString(),
                        size: pagination.size.toString(),
                        sortBy,
                        sortDirection
                    });

                    if (searchQuery.trim()) searchParams.append('query', searchQuery);
                    Object.entries(filters).forEach(([key, value]) => {
                        if (value) searchParams.append(key, value);
                    });

                    const response = await fetch(`${API_BASE_URL}/foods/search?${searchParams}`);
                    const data = await response.json();

                    setResults(data.foods || []);
                    setPagination({
                        currentPage: data.currentPage || 0,
                        totalPages: data.totalPages || 0,
                        totalElements: data.totalElements || 0,
                        size: data.size || 20
                    });
                } catch (error) {
                    console.error('Search error:', error);
                    setResults([]);
                    setPagination({
                        currentPage: 0,
                        totalPages: 0,
                        totalElements: 0,
                        size: 20
                    });
                } finally {
                    setLoading(false);
                }
            };

            const handleImageRecognition = async () => {
                if (!selectedFile) return;

                setRecognitionLoading(true);
                setRecognitionResults([]);
                setSearchQuery('');

                const formData = new FormData();
                formData.append('image', selectedFile);

                try {
                    const response = await fetch(`${API_BASE_URL}/foods/recognize`, {
                        method: 'POST',
                        body: formData
                    });

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const data = await response.json();
                    setRecognitionResults(data);
                } catch (error) {
                    console.error('Error during image recognition:', error);
                    setRecognitionResults([{
                        food: 'Error',
                        confidence: 0,
                        error: true,
                        message: 'We encountered an issue with image recognition. Please try again or use text search instead.'
                    }]);
                } finally {
                    setRecognitionLoading(false);
                }
            };

            const updateFilter = (key, value) => {
                setFilters(prev => ({ ...prev, [key]: value }));
            };

            const resetFilters = () => {
                setSearchQuery('');
                setFilters({
                    foodClass: '',
                    foodGroup: '',
                    region: '',
                    cookingMethod: '',
                    spiceLevel: '',
                    minCalories: '',
                    maxCalories: '',
                    minProtein: '',
                    maxProtein: ''
                });
                setSelectedFile(null);
                setRecognitionResults([]);
            };

            const handleFoodClick = async (food) => {
                try {
                    const response = await fetch(`${API_BASE_URL}/foods/${encodeURIComponent(food.uri)}`);
                    const detailedFood = await response.json();
                    setSelectedFood(detailedFood);
                    setShowModal(true);
                } catch (error) {
                    console.error('Error fetching food details:', error);
                    setSelectedFood(food);
                    setShowModal(true);
                }
            };

            return (
                <div className="app-container">
                    <Header activeTab={activeTab} setActiveTab={setActiveTab} />
                    
                    <main className="main-content">
                        {activeTab === 'discover' && (
                            <DiscoverySection
                                searchMode={searchMode}
                                setSearchMode={setSearchMode}
                                searchQuery={searchQuery}
                                setSearchQuery={setSearchQuery}
                                selectedFile={selectedFile}
                                setSelectedFile={setSelectedFile}
                                filters={filters}
                                updateFilter={updateFilter}
                                resetFilters={resetFilters}
                                handleSearch={handleSearch}
                                handleImageRecognition={handleImageRecognition}
                                loading={loading}
                                recognitionLoading={recognitionLoading}
                                metadata={metadata}
                                autocomplete={autocomplete}
                                showAutocomplete={showAutocomplete}
                                setShowAutocomplete={setShowAutocomplete}
                                handleAutocomplete={handleAutocomplete}
                                results={results}
                                recognitionResults={recognitionResults}
                                pagination={pagination}
                                handleFoodClick={handleFoodClick}
                                sortBy={sortBy}
                                setSortBy={setSortBy}
                                sortDirection={sortDirection}
                                setSortDirection={setSortDirection}
                            />
                        )}
                        
                        {activeTab === 'analytics' && <AnalyticsSection />}
                        {activeTab === 'system' && <SystemSection />}
                    </main>

                    {showModal && selectedFood && (
                        <FoodDetailModal
                            food={selectedFood}
                            onClose={() => setShowModal(false)}
                        />
                    )}
                </div>
            );
        }

        // Header Component
        function Header({ activeTab, setActiveTab }) {
            return (
                <header className="header">
                    <div className="header-content">
                        <div className="brand">
                            <div className="brand-icon">
                                <i className="fas fa-brain"></i>
                            </div>
                            <div className="brand-text">
                                <div className="brand-title">NutriGraph</div>
                                <div className="brand-subtitle">Advanced Food Intelligence Platform</div>
                            </div>
                        </div>
                        
                        <nav className="nav-tabs">
                            <button 
                                className={`nav-tab ${activeTab === 'discover' ? 'active' : ''}`}
                                onClick={() => setActiveTab('discover')}
                            >
                                <i className="fas fa-search"></i>
                                Discover
                            </button>
                            <button 
                                className={`nav-tab ${activeTab === 'analytics' ? 'active' : ''}`}
                                onClick={() => setActiveTab('analytics')}
                            >
                                <i className="fas fa-chart-line"></i>
                                Analytics
                            </button>
                            <button 
                                className={`nav-tab ${activeTab === 'system' ? 'active' : ''}`}
                                onClick={() => setActiveTab('system')}
                            >
                                <i className="fas fa-cogs"></i>
                                System
                            </button>
                        </nav>
                    </div>
                </header>
            );
        }

        // Discovery Section Component
        function DiscoverySection({
            searchMode, setSearchMode, searchQuery, setSearchQuery, selectedFile, setSelectedFile,
            filters, updateFilter, resetFilters, handleSearch, handleImageRecognition,
            loading, recognitionLoading, metadata, autocomplete, showAutocomplete, 
            setShowAutocomplete, handleAutocomplete, results, recognitionResults, 
            pagination, handleFoodClick, sortBy, setSortBy, sortDirection, setSortDirection
        }) {
            const fileInputRef = useRef(null);

            const handleFileSelect = (event) => {
                const file = event.target.files[0];
                if (file) {
                    setSelectedFile(file);
                }
            };

            const handleDrop = (event) => {
                event.preventDefault();
                const file = event.dataTransfer.files[0];
                if (file && file.type.startsWith('image/')) {
                    setSelectedFile(file);
                }
            };

            const handleDragOver = (event) => {
                event.preventDefault();
            };

            return (
                <React.Fragment>
                    <div className="glass-card search-section">
                        <div className="section-header">
                            <h1 className="section-title">Intelligent Food Discovery</h1>
                            <p className="section-subtitle">
                                Explore nutritional insights, cultural contexts, and culinary knowledge through advanced semantic search and AI-powered image recognition
                            </p>
                        </div>

                        <div className="search-tabs">
                            <div 
                                className={`search-tab ${searchMode === 'text' ? 'active' : ''}`}
                                onClick={() => setSearchMode('text')}
                            >
                                <i className="fas fa-keyboard search-tab-icon"></i>
                                <div className="search-tab-title">Text Search</div>
                                <div className="search-tab-desc">Search by name, ingredients, or properties</div>
                            </div>
                            
                            <div 
                                className={`search-tab ${searchMode === 'image' ? 'active' : ''}`}
                                onClick={() => setSearchMode('image')}
                            >
                                <i className="fas fa-camera search-tab-icon"></i>
                                <div className="search-tab-title">Image Recognition</div>
                                <div className="search-tab-desc">Upload photos for AI identification</div>
                            </div>
                            
                            <div 
                                className={`search-tab ${searchMode === 'cultural' ? 'active' : ''}`}
                                onClick={() => setSearchMode('cultural')}
                            >
                                <i className="fas fa-globe-africa search-tab-icon"></i>
                                <div className="search-tab-title">Cultural Explorer</div>
                                <div className="search-tab-desc">Discover regional and traditional cuisines</div>
                            </div>
                            
                            <div 
                                className={`search-tab ${searchMode === 'nutrition' ? 'active' : ''}`}
                                onClick={() => setSearchMode('nutrition')}
                            >
                                <i className="fas fa-heartbeat search-tab-icon"></i>
                                <div className="search-tab-title">Nutrition Focus</div>
                                <div className="search-tab-desc">Filter by nutritional requirements</div>
                            </div>
                        </div>

                        {searchMode === 'text' && (
                            <TextSearchForm 
                                searchQuery={searchQuery}
                                setSearchQuery={setSearchQuery}
                                autocomplete={autocomplete}
                                showAutocomplete={showAutocomplete}
                                setShowAutocomplete={setShowAutocomplete}
                                handleAutocomplete={handleAutocomplete}
                                handleSearch={handleSearch}
                                loading={loading}
                                resetFilters={resetFilters}
                            />
                        )}

                        {searchMode === 'image' && (
                            <ImageSearchForm
                                selectedFile={selectedFile}
                                setSelectedFile={setSelectedFile}
                                fileInputRef={fileInputRef}
                                handleFileSelect={handleFileSelect}
                                handleDrop={handleDrop}
                                handleDragOver={handleDragOver}
                                handleImageRecognition={handleImageRecognition}
                                recognitionLoading={recognitionLoading}
                                resetFilters={resetFilters}
                            />
                        )}

                        {searchMode === 'cultural' && (
                            <CulturalSearchForm
                                filters={filters}
                                updateFilter={updateFilter}
                                metadata={metadata}
                                handleSearch={handleSearch}
                                loading={loading}
                                resetFilters={resetFilters}
                            />
                        )}

                        {searchMode === 'nutrition' && (
                            <NutritionSearchForm
                                filters={filters}
                                updateFilter={updateFilter}
                                metadata={metadata}
                                handleSearch={handleSearch}
                                loading={loading}
                                resetFilters={resetFilters}
                            />
                        )}
                    </div>

                    {recognitionResults.length > 0 && (
                        <RecognitionResults results={recognitionResults} onFoodClick={handleFoodClick} />
                    )}

                    {(results.length > 0 || loading) && (
                        <ResultsSection
                            results={results}
                            loading={loading}
                            pagination={pagination}
                            handleSearch={handleSearch}
                            sortBy={sortBy}
                            setSortBy={setSortBy}
                            sortDirection={sortDirection}
                            setSortDirection={setSortDirection}
                            onFoodClick={handleFoodClick}
                        />
                    )}
                </React.Fragment>
            );
        }

        // Text Search Form Component
        function TextSearchForm({ 
            searchQuery, setSearchQuery, autocomplete, showAutocomplete, 
            setShowAutocomplete, handleAutocomplete, handleSearch, loading, resetFilters 
        }) {
            return (
                <div className="form-grid">
                    <div className="input-group">
                        <label className="input-label">Search Foods</label>
                        <div style={{ position: 'relative' }}>
                            <i className="fas fa-search input-icon"></i>
                            <input
                                type="text"
                                className="form-input"
                                placeholder="Enter food name, ingredient, or description..."
                                value={searchQuery}
                                onChange={(e) => {
                                    setSearchQuery(e.target.value);
                                    handleAutocomplete(e.target.value);
                                }}
                                onFocus={() => setShowAutocomplete(true)}
                                onBlur={() => setTimeout(() => setShowAutocomplete(false), 200)}
                                onKeyPress={(e) => e.key === 'Enter' && handleSearch(0)}
                            />
                            {showAutocomplete && autocomplete.length > 0 && (
                                <div className="autocomplete-dropdown">
                                    {autocomplete.map((suggestion, index) => (
                                        <div
                                            key={index}
                                            className="autocomplete-item"
                                            onClick={() => {
                                                setSearchQuery(suggestion);
                                                setShowAutocomplete(false);
                                            }}
                                        >
                                            {suggestion}
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>
                    </div>

                    <div style={{ display: 'flex', gap: 'var(--spacing-md)', marginTop: 'var(--spacing-md)' }}>
                        <button
                            className="btn btn-primary"
                            onClick={() => handleSearch(0)}
                            disabled={loading}
                            style={{ flex: 1 }}
                        >
                            {loading ? (
                                <React.Fragment>
                                    <i className="fas fa-spinner fa-spin"></i>
                                    Searching...
                                </React.Fragment>
                            ) : (
                                <React.Fragment>
                                    <i className="fas fa-search"></i>
                                    Search Foods
                                </React.Fragment>
                            )}
                        </button>
                        <button
                            className="btn btn-outline"
                            onClick={resetFilters}
                        >
                            <i className="fas fa-refresh"></i>
                            Reset
                        </button>
                    </div>
                </div>
            );
        }

        // Image Search Form Component
        function ImageSearchForm({
            selectedFile, setSelectedFile, fileInputRef, handleFileSelect, 
            handleDrop, handleDragOver, handleImageRecognition, recognitionLoading, resetFilters
        }) {
            // Loading messages to show during image processing
            const loadingMessages = [
                "Analyzing food patterns...",
                "Identifying ingredients...",
                "Matching with our database...",
                "Calculating nutritional profile...",
                "Processing image features...",
                "Applying AI recognition algorithms...",
                "Comparing with known food items..."
            ];
            
            // State for the current loading message
            const [loadingMessage, setLoadingMessage] = useState(loadingMessages[0]);
            
            // Change the loading message every 2 seconds during processing
            useEffect(() => {
                let messageInterval;
                if (recognitionLoading) {
                    messageInterval = setInterval(() => {
                        setLoadingMessage(loadingMessages[Math.floor(Math.random() * loadingMessages.length)]);
                    }, 2000);
                }
                
                return () => {
                    if (messageInterval) clearInterval(messageInterval);
                };
            }, [recognitionLoading]);
            
            // Preview the selected image
            const [imagePreview, setImagePreview] = useState(null);
            
            useEffect(() => {
                if (selectedFile) {
                    const reader = new FileReader();
                    reader.onloadend = () => {
                        setImagePreview(reader.result);
                    };
                    reader.readAsDataURL(selectedFile);
                } else {
                    setImagePreview(null);
                }
            }, [selectedFile]);
            
            return (
                <div className="form-grid">
                    <div className="input-group">
                        <label className="input-label">Upload Food Image</label>
                        <div
                            className={`file-upload ${selectedFile ? 'active' : ''}`}
                            onDrop={handleDrop}
                            onDragOver={handleDragOver}
                            onClick={() => fileInputRef.current && fileInputRef.current.click()}

                        >
                            <input
                                ref={fileInputRef}
                                type="file"
                                accept="image/*"
                                onChange={handleFileSelect}
                                style={{ display: 'none' }}
                            />
                            
                            {selectedFile ? (
                                <React.Fragment>
                                    <i className="fas fa-check-circle file-upload-icon" style={{ color: '#48bb78' }}></i>
                                    <div className="file-upload-text">{selectedFile.name}</div>
                                    <div className="file-upload-hint">File ready for analysis</div>
                                    {imagePreview && (
                                        <div style={{ marginTop: 'var(--spacing-md)', textAlign: 'center' }}>
                                            <img 
                                                src={imagePreview} 
                                                alt="Preview" 
                                                style={{ 
                                                    maxWidth: '100%', 
                                                    maxHeight: '200px', 
                                                    borderRadius: 'var(--border-radius-sm)',
                                                    boxShadow: 'var(--shadow-primary)'
                                                }} 
                                            />
                                        </div>
                                    )}
                                </React.Fragment>
                            ) : (
                                <React.Fragment>
                                    <i className="fas fa-cloud-upload-alt file-upload-icon"></i>
                                    <div className="file-upload-text">Drop your image here or click to browse</div>
                                    <div className="file-upload-hint">Supports JPG, PNG, GIF up to 10MB</div>
                                </React.Fragment>
                            )}
                        </div>
                    </div>

                    <div style={{ display: 'flex', gap: 'var(--spacing-md)', marginTop: 'var(--spacing-md)' }}>
                        <button
                            className="btn btn-success"
                            onClick={handleImageRecognition}
                            disabled={!selectedFile || recognitionLoading}
                            style={{ flex: 1 }}
                        >
                            {recognitionLoading ? (
                                <React.Fragment>
                                    <i className="fas fa-spinner fa-spin"></i>
                                    {loadingMessage}
                                </React.Fragment>
                            ) : (
                                <React.Fragment>
                                    <i className="fas fa-magic"></i>
                                    Identify Food
                                </React.Fragment>
                            )}
                        </button>
                        
                        <button
                            className="btn btn-outline"
                            onClick={() => {
                                setSelectedFile(null);
                                resetFilters();
                            }}
                        >
                            <i className="fas fa-times"></i>
                            Clear
                        </button>
                    </div>
                </div>
            );
        }

        // Cultural Search Form Component
        function CulturalSearchForm({ filters, updateFilter, metadata, handleSearch, loading, resetFilters }) {
            return (
                <div className="form-grid">
                    <div className="filters-grid">
                        <div className="input-group">
                            <label className="input-label">Region</label>
                            <select
                                className="form-input"
                                value={filters.region}
                                onChange={(e) => updateFilter('region', e.target.value)}
                                style={{ paddingLeft: 'var(--spacing-md)' }}
                            >
                                <option value="">All Regions</option>
                                {metadata.regions.map(region => (
                                    <option key={region} value={region}>{region.replace(/_/g, ' ')}</option>
                                ))}
                            </select>
                        </div>

                        <div className="input-group">
                            <label className="input-label">Cooking Method</label>
                            <select
                                className="form-input"
                                value={filters.cookingMethod}
                                onChange={(e) => updateFilter('cookingMethod', e.target.value)}
                                style={{ paddingLeft: 'var(--spacing-md)' }}
                            >
                                <option value="">All Methods</option>
                                {metadata.cookingMethods.map(method => (
                                    <option key={method} value={method}>{method}</option>
                                ))}
                            </select>
                        </div>

                        <div className="input-group">
                            <label className="input-label">Spice Level</label>
                            <select
                                className="form-input"
                                value={filters.spiceLevel}
                                onChange={(e) => updateFilter('spiceLevel', e.target.value)}
                                style={{ paddingLeft: 'var(--spacing-md)' }}
                            >
                                <option value="">All Levels</option>
                                {metadata.spiceLevels.map(level => (
                                    <option key={level} value={level}>{level}</option>
                                ))}
                            </select>
                        </div>
                    </div>

                    <div style={{ display: 'flex', gap: 'var(--spacing-md)', marginTop: 'var(--spacing-md)' }}>
                        <button
                            className="btn btn-primary"
                            onClick={() => handleSearch(0)}
                            disabled={loading}
                            style={{ flex: 1 }}
                        >
                            {loading ? (
                                <React.Fragment>
                                    <i className="fas fa-spinner fa-spin"></i>
                                    Exploring...
                                </React.Fragment>
                            ) : (
                                <React.Fragment>
                                    <i className="fas fa-globe-africa"></i>
                                    Explore Cuisine
                                </React.Fragment>
                            )}
                        </button>
                        
                        <button
                            className="btn btn-outline"
                            onClick={resetFilters}
                        >
                            <i className="fas fa-refresh"></i>
                            Reset
                        </button>
                    </div>
                </div>
            );
        }

        // Nutrition Search Form Component
        function NutritionSearchForm({ filters, updateFilter, metadata, handleSearch, loading, resetFilters }) {
            return (
                <div className="form-grid">
                    <div className="filters-grid">
                        <div className="input-group">
                            <label className="input-label">Food Category</label>
                            <select
                                className="form-input"
                                value={filters.foodClass}
                                onChange={(e) => updateFilter('foodClass', e.target.value)}
                                style={{ paddingLeft: 'var(--spacing-md)' }}
                            >
                                <option value="">All Categories</option>
                                {metadata.foodClasses.map(cls => (
                                    <option key={cls} value={cls}>{cls}</option>
                                ))}
                            </select>
                        </div>

                        <div className="input-group">
                            <label className="input-label">Food Group</label>
                            <select
                                className="form-input"
                                value={filters.foodGroup}
                                onChange={(e) => updateFilter('foodGroup', e.target.value)}
                                style={{ paddingLeft: 'var(--spacing-md)' }}
                            >
                                <option value="">All Groups</option>
                                {metadata.foodGroups.map(group => (
                                    <option key={group} value={group}>{group}</option>
                                ))}
                            </select>
                        </div>

                        <div className="input-group">
                            <label className="input-label">Calories (per 100g)</label>
                            <div className="range-inputs">
                                <input
                                    type="number"
                                    className="form-input"
                                    placeholder="Min"
                                    value={filters.minCalories}
                                    onChange={(e) => updateFilter('minCalories', e.target.value)}
                                    style={{ paddingLeft: 'var(--spacing-md)' }}
                                />
                                <input
                                    type="number"
                                    className="form-input"
                                    placeholder="Max"
                                    value={filters.maxCalories}
                                    onChange={(e) => updateFilter('maxCalories', e.target.value)}
                                    style={{ paddingLeft: 'var(--spacing-md)' }}
                                />
                            </div>
                        </div>

                        <div className="input-group">
                            <label className="input-label">Protein (g per 100g)</label>
                            <div className="range-inputs">
                                <input
                                    type="number"
                                    className="form-input"
                                    placeholder="Min"
                                    value={filters.minProtein}
                                    onChange={(e) => updateFilter('minProtein', e.target.value)}
                                    style={{ paddingLeft: 'var(--spacing-md)' }}
                                />
                                <input
                                    type="number"
                                    className="form-input"
                                    placeholder="Max"
                                    value={filters.maxProtein}
                                    onChange={(e) => updateFilter('maxProtein', e.target.value)}
                                    style={{ paddingLeft: 'var(--spacing-md)' }}
                                />
                            </div>
                        </div>
                    </div>

                    <div style={{ display: 'flex', gap: 'var(--spacing-md)', marginTop: 'var(--spacing-md)' }}>
                        <button
                            className="btn btn-primary"
                            onClick={() => handleSearch(0)}
                            disabled={loading}
                            style={{ flex: 1 }}
                        >
                            {loading ? (
                                <React.Fragment>
                                    <i className="fas fa-spinner fa-spin"></i>
                                    Analyzing...
                                </React.Fragment>
                            ) : (
                                <React.Fragment>
                                    <i className="fas fa-heartbeat"></i>
                                    Find Nutrition Match
                                </React.Fragment>
                            )}
                        </button>
                        
                        <button
                            className="btn btn-outline"
                            onClick={resetFilters}
                        >
                            <i className="fas fa-refresh"></i>
                            Reset
                        </button>
                    </div>
                </div>
            );
        }

        // Recognition Results Component
        function RecognitionResults({ results, onFoodClick }) {
            // Ref for scrolling to the results section
            const resultsRef = useRef(null);
            
            // Scroll to results section when component mounts
            useEffect(() => {
                if (resultsRef.current) {
                    resultsRef.current.scrollIntoView({ behavior: 'smooth' });
                }
            }, []);
            
            return (
                <div className="glass-card recognition-results fade-in" ref={resultsRef}>
                    <div className="section-header">
                        <h2 className="section-title" style={{ fontSize: '2rem' }}>Recognition Results</h2>
                        <p className="section-subtitle">AI-powered food identification results</p>
                    </div>
                    
                    <div style={{ display: 'grid', gap: 'var(--spacing-md)' }}>
                        {results.map((result, index) => (
                            <div key={index} className="recognition-card slide-up" style={{ animationDelay: `${index * 0.1}s` }}>
                                <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: 'var(--spacing-sm)' }}>
                                    <h3 style={{ margin: 0, color: 'var(--text-primary)' }}>{result.predictedName}</h3>
                                    <span style={{ 
                                        background: 'var(--success-gradient)',
                                        color: 'white',
                                        padding: '0.25rem 0.75rem',
                                        borderRadius: '20px',
                                        fontSize: '0.8rem',
                                        fontWeight: '600'
                                    }}>
                                        {(result.confidence * 100).toFixed(1)}% confidence
                                    </span>
                                </div>
                                
                                <div className="confidence-bar">
                                    <div 
                                        className="confidence-fill" 
                                        style={{ width: `${result.confidence * 100}%` }}
                                    ></div>
                                </div>
                                
                                {/* Display food image if available */}
                                {result.foodDetails && result.foodDetails.images && result.foodDetails.images.length > 0 && (
                                    <div style={{ marginTop: 'var(--spacing-sm)', textAlign: 'center' }}>
                                        <img 
                                            src={`${API_BASE_URL}/images/${result.foodDetails.images[0].imagePath.replace(/^(images\/|\/)/g, '')}`}
                                            alt={result.predictedName}
                                            style={{ 
                                                maxWidth: '100%', 
                                                maxHeight: '200px', 
                                                borderRadius: 'var(--border-radius-sm)',
                                                marginBottom: 'var(--spacing-sm)',
                                                boxShadow: 'var(--shadow-primary)'
                                            }}
                                            onError={(e) => {
                                                e.target.style.display = 'none';
                                            }}
                                        />
                                    </div>
                                )}

                                {result.ingredients && result.ingredients.length > 0 && (
                                    <div style={{ marginTop: 'var(--spacing-sm)' }}>
                                        <strong>Typical ingredients: </strong>
                                        <span style={{ color: 'var(--text-secondary)' }}>
                                            {result.ingredients.join(', ')}
                                        </span>
                                    </div>
                                )}

                                {result.foodDetails && (
                                    <button
                                        className="btn btn-outline"
                                        onClick={() => onFoodClick(result.foodDetails)}
                                        style={{ marginTop: 'var(--spacing-sm)' }}
                                    >
                                        <i className="fas fa-info-circle"></i>
                                        View Details
                                    </button>
                                )}
                            </div>
                        ))}
                    </div>
                </div>
            );
        }

        // Results Section Component
        function ResultsSection({ 
            results, loading, pagination, handleSearch, sortBy, setSortBy, 
            sortDirection, setSortDirection, onFoodClick 
        }) {
            if (loading) {
                return (
                    <div className="glass-card">
                        <div className="loading">
                            <div className="loading-spinner"></div>
                            <h3>Searching database...</h3>
                            <p>Analyzing nutritional data and cultural context</p>
                        </div>
                    </div>
                );
            }

            if (!results.length) {
                return (
                    <div className="glass-card">
                        <div className="empty-state">
                            <i className="fas fa-search-minus empty-state-icon"></i>
                            <h3>No results found</h3>
                            <p>Try adjusting your search criteria or explore different categories</p>
                        </div>
                    </div>
                );
            }

            return (
                <div className="glass-card results-section fade-in">
                    <div className="results-header">
                        <div className="results-count">
                            <strong>{pagination.totalElements.toLocaleString()}</strong> food items discovered
                        </div>
                        
                        <div style={{ display: 'flex', gap: 'var(--spacing-sm)', alignItems: 'center' }}>
                            <select
                                value={sortBy}
                                onChange={(e) => setSortBy(e.target.value)}
                                className="form-input"
                                style={{ 
                                    paddingLeft: 'var(--spacing-md)',
                                    minWidth: '150px',
                                    fontSize: '0.9rem'
                                }}
                            >
                                <option value="name">Name</option>
                                <option value="calories">Calories</option>
                                <option value="protein">Protein</option>
                            </select>
                            
                            <button
                                className="btn btn-outline"
                                onClick={() => setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc')}
                                style={{ padding: '0.75rem' }}
                            >
                                <i className={`fas fa-sort-${sortDirection === 'asc' ? 'up' : 'down'}`}></i>
                            </button>
                        </div>
                    </div>

                    <div className="results-grid">
                        {results.map((food, index) => (
                            <FoodCard 
                                key={food.uri || index} 
                                food={food} 
                                onClick={() => onFoodClick(food)}
                                index={index}
                            />
                        ))}
                    </div>

                    {pagination.totalPages > 1 && (
                        <Pagination pagination={pagination} onPageChange={handleSearch} />
                    )}
                </div>
            );
        }

        // Food Card Component
        function FoodCard({ food, onClick, index }) {
            const getImageUrl = () => {
                if (food.images && food.images.length > 0) {
                    let imagePath = food.images[0].imagePath;
                    let cleanPath = imagePath;
                    
                    if (cleanPath.startsWith('images/')) {
                        cleanPath = cleanPath.substring(7);
                    }
                    
                    if (cleanPath.startsWith('/')) {
                        cleanPath = cleanPath.substring(1);
                    }
                    
                    if (!cleanPath.includes('/')) {
                        const category = food.name ? food.name.replace(/\s+/g, '_').toLowerCase() : 'unknown';
                        cleanPath = `${category}/${cleanPath}`;
                    }
                    
                    return `${API_BASE_URL}/images/${cleanPath}`;
                }
                return null;
            };

            return (
                <div 
                    className="food-card slide-up" 
                    onClick={onClick}
                    style={{ animationDelay: `${index * 0.1}s` }}
                >
                    <div className="food-image">
                        {getImageUrl() ? (
                            <img 
                                src={getImageUrl()} 
                                alt={food.name}
                                onError={(e) => {
                                    e.target.style.display = 'none';
                                    e.target.parentElement.innerHTML = '<i class="fas fa-utensils"></i>';
                                }}
                            />
                        ) : (
                            <i className="fas fa-utensils"></i>
                        )}
                    </div>
                    
                    <div className="food-content">
                        <h3 className="food-name">{food.name}</h3>
                        
                        {food.classLabel && (
                            <span className="food-category">{food.classLabel}</span>
                        )}
                        
                        {food.region && (
                            <div style={{ 
                                display: 'flex', 
                                alignItems: 'center', 
                                gap: 'var(--spacing-xs)', 
                                marginBottom: 'var(--spacing-sm)',
                                fontSize: '0.9rem',
                                color: 'var(--text-secondary)'
                            }}>
                                <i className="fas fa-map-marker-alt"></i>
                                <span>{food.region.replace(/_/g, ' ')}</span>
                            </div>
                        )}
                        
                        {food.description && (
                            <p className="food-description">{food.description}</p>
                        )}

                        <div className="nutrition-grid">
                            {food.calories !== undefined && (
                                <div className="nutrition-item">
                                    <div className="nutrition-value">{Math.round(food.calories)}</div>
                                    <div className="nutrition-label">Calories</div>
                                </div>
                            )}
                            
                            {food.protein !== undefined && (
                                <div className="nutrition-item">
                                    <div className="nutrition-value">{food.protein != null ? food.protein.toFixed(1) : ''}g
</div>
                                    <div className="nutrition-label">Protein</div>
                                </div>
                            )}
                            
                            {food.carbohydrates !== undefined && (
                                <div className="nutrition-item">
                                    <div className="nutrition-value">{food.carbohydrates != null ? food.carbohydrates.toFixed(1) : ''}g
</div>
                                    <div className="nutrition-label">Carbs</div>
                                </div>
                            )}
                            
                            {food.fat !== undefined && (
                                <div className="nutrition-item">
                                    <div className="nutrition-value">{food.fat != null ? food.fat.toFixed(1) : ''}g</div>
                                    <div className="nutrition-label">Fat</div>
                                </div>
                            )}
                        </div>

                        {food.searchScore && (
                            <div style={{ 
                                marginTop: 'var(--spacing-sm)', 
                                fontSize: '0.8rem', 
                                color: 'var(--text-secondary)',
                                textAlign: 'right'
                            }}>
                                Relevance: {(food.searchScore * 100).toFixed(0)}%
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        // Pagination Component
        function Pagination({ pagination, onPageChange }) {
            const getPageNumbers = () => {
                const pages = [];
                const { currentPage, totalPages } = pagination;
                
                let startPage = Math.max(0, currentPage - 2);
                let endPage = Math.min(totalPages - 1, startPage + 4);
                
                if (endPage - startPage < 4) {
                    startPage = Math.max(0, endPage - 4);
                }
                
                for (let i = startPage; i <= endPage; i++) {
                    pages.push(i);
                }
                
                return pages;
            };

            return (
                <div style={{ 
                    display: 'flex', 
                    justifyContent: 'center', 
                    alignItems: 'center', 
                    gap: 'var(--spacing-sm)', 
                    marginTop: 'var(--spacing-xl)',
                    flexWrap: 'wrap'
                }}>
                    <button
                        className="btn btn-outline"
                        onClick={() => onPageChange(0)}
                        disabled={pagination.currentPage === 0}
                        style={{ padding: '0.5rem 0.75rem' }}
                    >
                        <i className="fas fa-angle-double-left"></i>
                    </button>
                    
                    <button
                        className="btn btn-outline"
                        onClick={() => onPageChange(pagination.currentPage - 1)}
                        disabled={pagination.currentPage === 0}
                        style={{ padding: '0.5rem 0.75rem' }}
                    >
                        <i className="fas fa-angle-left"></i>
                    </button>

                    {getPageNumbers().map(pageNum => (
                        <button
                            key={pageNum}
                            className={`btn ${pageNum === pagination.currentPage ? 'btn-primary' : 'btn-outline'}`}
                            onClick={() => onPageChange(pageNum)}
                            style={{ padding: '0.5rem 0.75rem', minWidth: '40px' }}
                        >
                            {pageNum + 1}
                        </button>
                    ))}

                    <button
                        className="btn btn-outline"
                        onClick={() => onPageChange(pagination.currentPage + 1)}
                        disabled={pagination.currentPage >= pagination.totalPages - 1}
                        style={{ padding: '0.5rem 0.75rem' }}
                    >
                        <i className="fas fa-angle-right"></i>
                    </button>
                    
                    <button
                        className="btn btn-outline"
                        onClick={() => onPageChange(pagination.totalPages - 1)}
                        disabled={pagination.currentPage >= pagination.totalPages - 1}
                        style={{ padding: '0.5rem 0.75rem' }}
                    >
                        <i className="fas fa-angle-double-right"></i>
                    </button>
                </div>
            );
        }

        // Food Detail Modal Component
        function FoodDetailModal({ food, onClose }) {
            return (
                <div className="modal-overlay" onClick={onClose}>
                    <div className="modal-content" onClick={e => e.stopPropagation()}>
                        <div className="modal-header">
                            <h2 className="modal-title">{food.name}</h2>
                            <button className="modal-close" onClick={onClose}>
                                <i className="fas fa-times"></i>
                            </button>
                        </div>
                        
                        <div style={{ padding: 'var(--spacing-lg)' }}>
                            {food.images && food.images.length > 0 && (
                                <div style={{ textAlign: 'center', marginBottom: 'var(--spacing-lg)' }}>
                                    <img 
                                        src={`${API_BASE_URL}/images/${food.images[0].imagePath}`} 
                                        alt={food.name}
                                        style={{ 
                                            maxWidth: '100%', 
                                            maxHeight: '300px', 
                                            borderRadius: 'var(--border-radius)',
                                            boxShadow: 'var(--shadow-primary)'
                                        }}
                                        onError={(e) => e.target.style.display = 'none'}
                                    />
                                </div>
                            )}
                            
                            <div style={{ display: 'grid', gap: 'var(--spacing-lg)' }}>
                                {food.description && (
                                    <div>
                                        <h3 style={{ marginBottom: 'var(--spacing-sm)' }}>Description</h3>
                                        <p style={{ color: 'var(--text-secondary)', lineHeight: 1.6 }}>
                                            {food.description}
                                        </p>
                                    </div>
                                )}
                                
                                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))', gap: 'var(--spacing-md)' }}>
                                    {food.classLabel && (
                                        <div>
                                            <strong>Category:</strong> {food.classLabel}
                                        </div>
                                    )}
                                    
                                    {food.region && (
                                        <div>
                                            <strong>Region:</strong> {food.region.replace(/_/g, ' ')}
                                        </div>
                                    )}
                                    
                                    {food.cookingMethod && (
                                        <div>
                                            <strong>Cooking Method:</strong> {food.cookingMethod}
                                        </div>
                                    )}
                                    
                                    {food.spiceLevel && (
                                        <div>
                                            <strong>Spice Level:</strong> {food.spiceLevel}
                                        </div>
                                    )}
                                </div>
                                
                                <div>
                                    <h3 style={{ marginBottom: 'var(--spacing-md)' }}>Nutritional Information (per 100g)</h3>
                                    <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))', gap: 'var(--spacing-sm)' }}>
                                        {[
                                            { label: 'Calories', value: food.calories, unit: 'kcal' },
                                            { label: 'Protein', value: food.protein, unit: 'g' },
                                            { label: 'Carbohydrates', value: food.carbohydrates, unit: 'g' },
                                            { label: 'Fat', value: food.fat, unit: 'g' },
                                            { label: 'Fiber', value: food.fiber, unit: 'g' },
                                            { label: 'Sodium', value: food.sodium, unit: 'mg' },
                                            { label: 'Sugar', value: food.sugar, unit: 'g' }
                                        ].filter(item => item.value !== undefined).map((item, index) => (
                                            <div key={index} className="stat-card">
                                                <div className="stat-value">
                                                    {typeof item.value === 'number' ? item.value.toFixed(1) : item.value}
                                                    <span style={{ fontSize: '0.8rem', fontWeight: 'normal' }}>{item.unit}</span>
                                                </div>
                                                <div className="stat-label">{item.label}</div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                                
                                {food.ingredients && food.ingredients.length > 0 && (
                                    <div>
                                        <h3 style={{ marginBottom: 'var(--spacing-md)' }}>Ingredients</h3>
                                        <div style={{ display: 'flex', flexWrap: 'wrap', gap: 'var(--spacing-xs)' }}>
                                            {food.ingredients.map((ingredient, index) => (
                                                <span 
                                                    key={index}
                                                    style={{
                                                        background: 'var(--primary-gradient)',
                                                        color: 'white',
                                                        padding: '0.25rem 0.75rem',
                                                        borderRadius: '20px',
                                                        fontSize: '0.9rem',
                                                        fontWeight: '500'
                                                    }}
                                                >
                                                    {ingredient}
                                                </span>
                                            ))}
                                        </div>
                                    </div>
                                )}

                                {food.culturalSignificance && (
                                    <div>
                                        <h3 style={{ marginBottom: 'var(--spacing-sm)' }}>Cultural Significance</h3>
                                        <p style={{ color: 'var(--text-secondary)', lineHeight: 1.6 }}>
                                            {food.culturalSignificance}
                                        </p>
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // Analytics Section Component
        function AnalyticsSection() {
            const [stats, setStats] = useState(null);
            const [culturalStats, setCulturalStats] = useState(null);
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                loadAnalytics();
            }, []);

            const loadAnalytics = async () => {
                setLoading(true);
                try {
                    const [indexStats, culturalData] = await Promise.all([
                        fetch(`${API_BASE_URL}/foods/stats`).then(r => r.json()),
                        fetch(`${API_BASE_URL}/foods/stats/cultural`).then(r => r.json())
                    ]);

                    setStats(indexStats);
                    setCulturalStats(culturalData);
                } catch (error) {
                    console.error('Failed to load analytics:', error);
                } finally {
                    setLoading(false);
                }
            };

            if (loading) {
                return (
                    <div className="glass-card">
                        <div className="loading">
                            <div className="loading-spinner"></div>
                            <h3>Loading Analytics...</h3>
                            <p>Gathering insights from the knowledge graph</p>
                        </div>
                    </div>
                );
            }

            return (
                <div className="glass-card fade-in">
                    <div className="section-header">
                        <h1 className="section-title">Platform Analytics</h1>
                        <p className="section-subtitle">
                            Comprehensive insights into food data, cultural diversity, and usage patterns
                        </p>
                    </div>

                    <div className="admin-grid">
                        <div className="admin-card">
                            <div className="admin-card-header">
                                <i className="fas fa-database admin-card-icon"></i>
                                <h3>Database Overview</h3>
                            </div>
                            <div className="admin-card-content">
                                <div className="stats-grid">
                                    <div className="stat-card">
                                        <div className="stat-value">{stats && stats.totalDocuments ? stats.totalDocuments.toLocaleString() : '0'}
</div>
                                        <div className="stat-label">Food Items</div>
                                    </div>
                                    <div className="stat-card">
                                        <div className="stat-value">{stats && stats.totalRegions ? stats.totalRegions.toLocaleString() : '0'}</div>
                                        <div className="stat-label">Regions</div>
                                    </div>
                                    <div className="stat-card">
                                        <div className="stat-value">{stats && typeof stats.indexValid !== 'undefined' ? (stats.indexValid ? 'Active' : 'Inactive') : 'Inactive'}</div>
                                        <div className="stat-label">Index Status</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div className="admin-card">
                            <div className="admin-card-header">
                                <i className="fas fa-globe-africa admin-card-icon"></i>
                                <h3>Cultural Distribution</h3>
                            </div>
                            <div className="admin-card-content">
                               {culturalStats && culturalStats.regions && (
                                    <div style={{ display: 'grid', gap: 'var(--spacing-sm)' }}>
                                        {culturalStats.regions.slice(0, 5).map((region, index) => (
                                            <div key={index} style={{ 
                                                display: 'flex', 
                                                justifyContent: 'space-between', 
                                                alignItems: 'center',
                                                padding: 'var(--spacing-sm)',
                                                background: '#f8fafc',
                                                borderRadius: 'var(--border-radius-sm)'
                                            }}>
                                                <span>{region.replace(/_/g, ' ')}</span>
                                                <span style={{ fontWeight: '600', color: 'var(--text-primary)' }}>
                                                    {culturalStats && culturalStats.foodsByRegion && culturalStats.foodsByRegion[region] ? culturalStats.foodsByRegion[region] : 0} items
                                                </span>
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>
                        </div>

                        <div className="admin-card">
                            <div className="admin-card-header">
                                <i className="fas fa-chart-pie admin-card-icon"></i>
                                <h3>Performance Metrics</h3>
                            </div>
                            <div className="admin-card-content">
                                <div style={{ display: 'grid', gap: 'var(--spacing-md)' }}>
                                    <div style={{ 
                                        display: 'flex', 
                                        justifyContent: 'space-between', 
                                        alignItems: 'center',
                                        padding: 'var(--spacing-sm) 0',
                                        borderBottom: '1px solid #e2e8f0'
                                    }}>
                                        <span>Search Performance</span>
                                        <span style={{ color: '#48bb78', fontWeight: '600' }}>Optimal</span>
                                    </div>
                                    <div style={{ 
                                        display: 'flex', 
                                        justifyContent: 'space-between', 
                                        alignItems: 'center',
                                        padding: 'var(--spacing-sm) 0',
                                        borderBottom: '1px solid #e2e8f0'
                                    }}>
                                        <span>Image Recognition</span>
                                        <span style={{ color: '#4299e1', fontWeight: '600' }}>Active</span>
                                    </div>
                                    <div style={{ 
                                        display: 'flex', 
                                        justifyContent: 'space-between', 
                                        alignItems: 'center',
                                        padding: 'var(--spacing-sm) 0'
                                    }}>
                                        <span>Data Freshness</span>
                                        <span style={{ color: '#48bb78', fontWeight: '600' }}>Current</span>
                                    </div>
                                </div>
                                
                                <button
                                    className="btn btn-primary"
                                    onClick={loadAnalytics}
                                    style={{ marginTop: 'var(--spacing-md)', width: '100%' }}
                                >
                                    <i className="fas fa-sync-alt"></i>
                                    Refresh Analytics
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        // System Section Component
        function SystemSection() {
            const [indexStats, setIndexStats] = useState(null);
            const [reindexing, setReindexing] = useState(false);
            const [loadingStats, setLoadingStats] = useState(true);

            useEffect(() => {
                loadSystemStats();
            }, []);

            const loadSystemStats = async () => {
                setLoadingStats(true);
                try {
                    const response = await fetch(`${API_BASE_URL}/foods/stats`);
                    const data = await response.json();
                    setIndexStats(data);
                } catch (error) {
                    console.error('Failed to load system stats:', error);
                } finally {
                    setLoadingStats(false);
                }
            };

            const handleReindex = async () => {
                setReindexing(true);
                try {
                    const response = await fetch(`${API_BASE_URL}/foods/reindex`, {
                        method: 'POST'
                    });
                    const message = await response.text();
                    alert('✅ ' + message);
                    
                    setTimeout(() => {
                        loadSystemStats();
                    }, 1000);
                    
                } catch (error) {
                    console.error('Reindex error:', error);
                    alert('❌ Error during reindexing');
                } finally {
                    setReindexing(false);
                }
            };

            const openFuseki = () => {
                const fusekiUrl = 'http://localhost:3030/#/dataset/african-middle-eastern-kg/query';
                window.open(fusekiUrl, '_blank', 'noopener,noreferrer');
            };

            return (
                <div className="glass-card fade-in">
                    <div className="section-header">
                        <h1 className="section-title">System Management</h1>
                        <p className="section-subtitle">
                            Maintain and optimize the NutriGraph platform infrastructure
                        </p>
                    </div>

                    <div className="admin-grid">
                        <div className="admin-card">
                            <div className="admin-card-header">
                                <i className="fas fa-server admin-card-icon"></i>
                                <h3>Search Index</h3>
                            </div>
                            <div className="admin-card-content">
                                <p style={{ marginBottom: 'var(--spacing-md)', color: 'var(--text-secondary)' }}>
                                    Optimize search performance by rebuilding the Lucene index with latest data.
                                </p>
                                
                                {indexStats && (
                                    <div style={{ 
                                        background: '#f8fafc', 
                                        padding: 'var(--spacing-md)', 
                                        borderRadius: 'var(--border-radius-sm)',
                                        marginBottom: 'var(--spacing-md)',
                                        border: '1px solid #e2e8f0'
                                    }}>
                                        <div style={{ fontSize: '0.9rem', color: 'var(--text-secondary)' }}>
                                            <strong>Documents:</strong> {indexStats && indexStats.totalDocuments ? indexStats.totalDocuments.toLocaleString() : '0'}
                                            {indexStats.deletedDocuments > 0 && (
                                                <span> • <strong>Deleted:</strong> {indexStats.deletedDocuments}</span>
                                            )}
                                        </div>
                                    </div>
                                )}
                                
                                <button 
                                    className="btn btn-primary"
                                    onClick={handleReindex}
                                    disabled={reindexing}
                                    style={{ width: '100%' }}
                                >
                                    {reindexing ? (
                                        <React.Fragment>
                                            <i className="fas fa-spinner fa-spin"></i>
                                            Rebuilding Index...
                                        </React.Fragment>
                                    ) : (
                                        <React.Fragment>
                                            <i className="fas fa-refresh"></i>
                                            Rebuild Index
                                        </React.Fragment>
                                    )}
                                </button>
                            </div>
                        </div>

                        <div className="admin-card">
                            <div className="admin-card-header">
                                <i className="fas fa-chart-bar admin-card-icon"></i>
                                <h3>System Statistics</h3>
                            </div>
                            <div className="admin-card-content">
                                <div className="stats-grid">
                                    <div className="stat-card">
                                        <div className="stat-value">
                                            {loadingStats ? (
                                                <i className="fas fa-spinner fa-spin"></i>
                                            ) : (
                                                (indexStats && indexStats.totalDocuments ? indexStats.totalDocuments.toLocaleString() : '0')
                                            )}
                                        </div>
                                        <div className="stat-label">Indexed Items</div>
                                    </div>
                                    <div className="stat-card">
                                        <div className="stat-value">
                                            {loadingStats ? (
                                                <i className="fas fa-spinner fa-spin"></i>
                                            ) : (
                                                (indexStats && indexStats.indexValid ? 'Healthy' : 'Error')
                                            )}
                                        </div>
                                        <div className="stat-label">Index Status</div>
                                    </div>
                                </div>
                                
                                <button 
                                    className="btn btn-secondary"
                                    onClick={loadSystemStats}
                                    disabled={loadingStats}
                                    style={{ marginTop: 'var(--spacing-md)', width: '100%' }}
                                >
                                    <i className={`fas fa-${loadingStats ? 'spinner fa-spin' : 'sync-alt'}`}></i>
                                    Refresh Stats
                                </button>
                            </div>
                        </div>

                        <div className="admin-card">
                            <div className="admin-card-header">
                                <i className="fas fa-database admin-card-icon"></i>
                                <h3>Knowledge Graph</h3>
                            </div>
                            <div className="admin-card-content">
                                <p style={{ marginBottom: 'var(--spacing-md)', color: 'var(--text-secondary)' }}>
                                    Access the SPARQL endpoint for advanced queries and data management.
                                </p>
                                
                                <div style={{ 
                                    background: '#f8fafc', 
                                    padding: 'var(--spacing-md)', 
                                    borderRadius: 'var(--border-radius-sm)',
                                    marginBottom: 'var(--spacing-md)',
                                    fontSize: '0.85rem',
                                    fontFamily: 'monospace',
                                    border: '1px solid #e2e8f0'
                                }}>
                                    <div><strong>Dataset:</strong> african-middle-eastern-kg</div>
                                    <div><strong>Endpoint:</strong> localhost:3030</div>
                                </div>
                                
                                <button 
                                    className="btn btn-success"
                                    onClick={openFuseki}
                                    style={{ width: '100%' }}
                                >
                                    <i className="fas fa-external-link-alt"></i>
                                    Open SPARQL Interface
                                </button>
                            </div>
                        </div>
                    </div>

                    <div style={{ 
                        marginTop: 'var(--spacing-xl)', 
                        background: 'rgba(255, 255, 255, 0.7)',
                        padding: 'var(--spacing-lg)',
                        borderRadius: 'var(--border-radius)',
                        border: '1px solid rgba(255, 255, 255, 0.3)'
                    }}>
                        <h3 style={{ marginBottom: 'var(--spacing-md)', color: 'var(--text-primary)' }}>
                            <i className="fas fa-info-circle" style={{ marginRight: 'var(--spacing-xs)' }}></i>
                            System Information
                        </h3>
                        <div style={{ 
                            display: 'grid', 
                            gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', 
                            gap: 'var(--spacing-sm)',
                            fontSize: '0.9rem',
                            color: 'var(--text-secondary)'
                        }}>
                            <div>🔗 <strong>API Endpoint:</strong> {API_BASE_URL}</div>
                            <div>🔍 <strong>Search Engine:</strong> Apache Lucene</div>
                            <div>🧠 <strong>Knowledge Graph:</strong> Apache Jena</div>
                            <div>📊 <strong>SPARQL Endpoint:</strong> Fuseki Server</div>
                            <div>🖼️ <strong>Image Recognition:</strong> Computer Vision</div>
                            <div>🌍 <strong>Cultural Context:</strong> Multi-regional</div>
                        </div>
                    </div>
                </div>
            );
        }

        // Render the application
        ReactDOM.render(<NutriGraphApp />, document.getElementById('root'));
    </script>
</body>
</html>